<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<title>Heartopia Tab Converter</title>
<style>
  body {
    font-family: system-ui, sans-serif;
    background: #f6f6f6;
    padding: 20px;
  }
  textarea {
    width: 100%;
    min-height: 200px;
    margin: 10px 0;
    font-family: monospace;
    font-size: 14px;
    padding: 10px;
  }
  .tabs {
    display: flex;
    gap: 10px;
    margin-bottom: 10px;
  }
  .tabs button {
    padding: 8px 14px;
    cursor: pointer;
    border: none;
    background: #ddd;
  }
  .tabs button.active {
    background: #333;
    color: white;
  }
  .actions {
    display: flex;
    gap: 10px;
    margin-bottom: 10px;
  }
</style>
</head>
<body>

<h2>ðŸŽµ Heartopia Tab Converter</h2>

<div class="tabs">
  <button id="tab-range" class="active" onclick="setMode('range')">
    2 octaves
  </button>
  <button id="tab-down" onclick="setMode('down')">
    1 octave down
  </button>
</div>

<textarea id="input" placeholder="Ð’ÑÑ‚Ð°Ð² Ñ‚Ð°Ð±Ð¸ Ñ‚ÑƒÑ‚..."></textarea>

<div class="actions">
  <button onclick="convert()">Convert</button>
  <button onclick="copyResult()">Copy</button>
</div>

<textarea id="output" placeholder="Ð ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚..." readonly></textarea>

<script>
let mode = "range";

function setMode(newMode) {
  mode = newMode;
  document.getElementById("tab-range").classList.toggle("active", mode === "range");
  document.getElementById("tab-down").classList.toggle("active", mode === "down");
}

function convert() {
  const input = document.getElementById("input").value;
  let output = input;

  if (mode === "range") {
    // Ð’Ð¸Ñ€Ñ–Ð²Ð½ÑŽÐ²Ð°Ð½Ð½Ñ Ð² 2 Ð¾ÐºÑ‚Ð°Ð²Ð¸ (1 â†’ 1Â°Â°)
    output = input.replace(/(\d)(Â°Â°)/g, (m, d) => {
      return d === "1" ? "1Â°Â°" : d + "Â°";
    });
  }

  if (mode === "down") {
    // ÐžÐºÑ‚Ð°Ð²Ð° Ð²Ð½Ð¸Ð·
    output = input.replace(/(\d)(Â°*)/g, (m, d, deg) => {
      if (deg.length > 0) {
        return d + deg.slice(1);
      }
      return d + "_";
    });
  }

  document.getElementById("output").value = output;
}

function copyResult() {
  const out = document.getElementById("output");
  out.select();
  document.execCommand("copy");
}
</script>

</body>
</html>
