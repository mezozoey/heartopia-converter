<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<title>Kalimba Converter</title>
<style>
  body {
    font-family: system-ui, sans-serif;
    background: #f6f6f6;
    padding: 20px;
  }
  textarea {
    width: 100%;
    min-height: 200px;
    margin: 10px 0;
    font-family: monospace;
    font-size: 14px;
    padding: 10px;
  }
  .tabs {
    display: flex;
    gap: 10px;
    margin-bottom: 10px;
  }
  .tabs button {
    padding: 8px 14px;
    cursor: pointer;
    border: none;
    background: #ddd;
  }
  .tabs button.active {
    background: #333;
    color: white;
  }
  .actions {
    display: flex;
    gap: 10px;
    margin-bottom: 10px;
  }
</style>
</head>
<body>

<h2>üéµ Kalimba Converter</h2>

<div class="tabs">
  <button id="tab-range" class="active" onclick="setMode('range')">
    2 –æ–∫—Ç–∞–≤–∏
  </button>
  <button id="tab-down" onclick="setMode('down')">
    –û–∫—Ç–∞–≤–∞ –≤–Ω–∏–∑
  </button>
</div>

<textarea id="input" placeholder="–í—Å—Ç–∞–≤ —Ç–∞–±–∏ —Ç—É—Ç..."></textarea>

<div class="actions">
  <button onclick="convert()">–ö–æ–Ω–≤–µ—Ä—Ç—É–≤–∞—Ç–∏</button>
  <button onclick="copyResult()">–°–∫–æ–ø—ñ—é–≤–∞—Ç–∏</button>
</div>

<textarea id="output" placeholder="–†–µ–∑—É–ª—å—Ç–∞—Ç..." readonly></textarea>

<script>
let mode = "range";

function setMode(newMode) {
  mode = newMode;
  document.getElementById("tab-range").classList.toggle("active", mode === "range");
  document.getElementById("tab-down").classList.toggle("active", mode === "down");
}

function convert() {
  const input = document.getElementById("input").value;
  let output = input;

  if (mode === "range") {
    // –í–∏—Ä—ñ–≤–Ω—é–≤–∞–Ω–Ω—è –≤ 2 –æ–∫—Ç–∞–≤–∏ (1 ‚Üí 1¬∞¬∞)
    output = input.replace(/(\d)(¬∞¬∞)/g, (m, d) => {
      return d === "1" ? "1¬∞¬∞" : d + "¬∞";
    });
  }

  if (mode === "down") {
    // –û–∫—Ç–∞–≤–∞ –≤–Ω–∏–∑
    output = input.replace(/(\d)(¬∞*)/g, (m, d, deg) => {
      if (deg.length > 0) {
        return d + deg.slice(1);
      }
      return d + "_";
    });
  }

  document.getElementById("output").value = output;
}

function copyResult() {
  const out = document.getElementById("output");
  out.select();
  document.execCommand("copy");
}
</script>

</body>
</html>
